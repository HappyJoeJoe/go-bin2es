[
    {
        "schema":"my_test",
        "tables": [
            "Parent",
            "Child"
        ],
        "actions":["insert", "update", "delete"],
        "pipelines": [
            {
                "PkDoSQL":{
                    "sql":"SELECT Parent.id, Parent.name, Parent.sex, GROUP_CONCAT(CONCAT_WS('_', Child.name, Child.sex) SEPARATOR ',') AS Childs FROM Parent INNER JOIN Child ON Parent.id = Child.parent_id WHERE (?) GROUP BY Parent.id",
                    "replaces": [
                        {"Parent":"id"},
                        {"Child":"parent_id"}
                    ]
                }
            },
            {
                "NestedObj":{
                    "common":"profile",
                    "fields":[
                        {"name":"es_name"},
                        {"sex":"es_sex"}
                    ]
                }
            },
            {
                "NestedArray":{
                    "sql_field":"Childs",
                    "common":"childs",
                    "pos2fields":[
                        {"chl_name":1},
                        {"chl_sex":2}
                    ],
                    "fields_seprator": "_",
                    "group_seprator": ","
                }
            },
            {
                "SetDocID": {
                    "doc_id": "id"
                }
            }
        ],
        "dest":{
            "index":"test_es"
        }
    }
]